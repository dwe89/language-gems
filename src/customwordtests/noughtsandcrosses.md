  Console Ninja extension is connected to Next.js browser, see https://tinyurl.com/2vt8jxzw for more info.
 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
 Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.
GoTrueClient @ webpack-internal:///â€¦/GoTrueClient.js:86
 Starting auth initialization...
 ğŸ” Fetching current session...
 ğŸ”§ [SUPABASE] Client exposed globally for console testing
 Starting auth initialization...
 ğŸ” Fetching current session...
 ğŸ”§ [SUPABASE] Client exposed globally for console testing
 âœ… [GRAMMAR TEST INJECTOR] testAssignmentConfiguration is now available!
 âœ… [GRAMMAR TEST INJECTOR] findRealAssignments is now available!
 [Vercel Web Analytics] Debug mode is enabled by default in development. No requests will be sent to the server.
 [Vercel Web Analytics] Running queued event pageview Object
 [Vercel Web Analytics] Running queued event pageview Object
 [Vercel Web Analytics] [pageview] http://localhost:3000/ Object
 [Vercel Web Analytics] [pageview] http://localhost:3000/ Object
 ğŸ“Š Session fetched: Object
 ğŸ“Š Session fetched: Object
 updateAuthState called with session: false
 No user session, clearing auth state
 updateAuthState completed
 Auth initialization completed successfully
 MainNavigation: Auth state updated Object
 Auth state change event: INITIAL_SESSION Session: false
 [Vercel Web Analytics] [pageview] http://localhost:3000/auth/login Object
 [Vercel Web Analytics] [pageview] http://localhost:3000/auth/student-login Object
:3000/auth/student-login:1 [DOM] Input elements should have autocomplete attributes (suggested: "current-password"): (More info: https://goo.gl/9p2vKq) 
 Auth state change event: SIGNED_IN Session: true
 updateAuthState called with session: true
 Getting user data for: langauge.gems1.1767985765605@student.languagegems.com
 Role from user_metadata: student
 getUserData returning: Object
 Setting user role in state: student
 Setting subscription status: true
 updateAuthState completed
 [Vercel Web Analytics] [pageview] http://localhost:3000/student-dashboard Object
 ğŸ” [UNIFIED VOCAB] Getting vocabulary data for student: 9d184226-be17-4612-8685-0ac45fcef060
 ğŸ” [GEMS ANALYTICS] Loading analytics for student: 9d184226-be17-4612-8685-0ac45fcef060
 ğŸ” [DUAL-TRACK] Fetching XP breakdown for student: 9d184226-be17-4612-8685-0ac45fcef060
 Student dashboard accessed on main domain - allowing access without redirects
 Student dashboard accessed on main domain - skipping production redirects
 Timer 'â±ï¸ [VOCAB] getVocabularyData' already exists
getVocabularyData @ webpack-internal:///â€¦abularyService.ts:7
 ğŸ” [UNIFIED VOCAB] Getting vocabulary data for student: 9d184226-be17-4612-8685-0ac45fcef060
 Timer 'â±ï¸ getDashboardMetrics' already exists
getDashboardMetrics @ webpack-internal:///â€¦hboardService.ts:50
 Timer 'â±ï¸ get sessions' already exists
getDashboardMetrics @ webpack-internal:///â€¦hboardService.ts:52
 ğŸ” [GEMS ANALYTICS] Loading analytics for student: 9d184226-be17-4612-8685-0ac45fcef060
 ğŸ” [DUAL-TRACK] Fetching XP breakdown for student: 9d184226-be17-4612-8685-0ac45fcef060
 ğŸ“Š [DUAL-TRACK] Raw analytics data: Object
 âœ… [DUAL-TRACK] XP breakdown result: Object
 ğŸ” [UNIFIED VOCAB] Gem data query result: Object
 ğŸ“Š [DUAL-TRACK] Raw analytics data: Object
 âœ… [DUAL-TRACK] XP breakdown result: Object
 â±ï¸ get sessions: 125.572998046875 ms
 ğŸ’ [VOCABULARY COLLECTION] Mastery Gems by rarity: Object
 ğŸ’ [TODAY'S VOCABULARY] Today's Mastery Gems by rarity: Object
GemsAnalyticsService.ts:200 ğŸ“Š [TRIPLE-TRACK] Analytics loaded: Object
unifiedVocabularyService.ts:71 ğŸ” [UNIFIED VOCAB] Gem data query result: Object
unifiedStudentDashboardService.ts:121 Timer 'â±ï¸ get sessions' does not exist
getDashboardMetrics @ unifiedStudentDashboardService.ts:121
unifiedStudentDashboardService.ts:133 Timer 'â±ï¸ parallel queries' already exists
getDashboardMetrics @ unifiedStudentDashboardService.ts:133
GemsAnalyticsService.ts:171 ğŸ’ [VOCABULARY COLLECTION] Mastery Gems by rarity: Object
GemsAnalyticsService.ts:172 ğŸ’ [TODAY'S VOCABULARY] Today's Mastery Gems by rarity: Object
GemsAnalyticsService.ts:200 ğŸ“Š [TRIPLE-TRACK] Analytics loaded: Object
unifiedStudentDashboardService.ts:143 â±ï¸ parallel queries: 209.011962890625 ms
unifiedStudentDashboardService.ts:145 â±ï¸ getDashboardMetrics: 334.671142578125 ms
unifiedVocabularyService.ts:148 ğŸ” [UNIFIED VOCAB] Vocabulary data fetched: Object
unifiedVocabularyService.ts:251 â±ï¸ [VOCAB] getVocabularyData: 341.85986328125 ms
ModernStudentDashboard.tsx:452 ğŸ“Š [DASHBOARD] Gems data loaded: Object
unifiedVocabularyService.ts:148 ğŸ” [UNIFIED VOCAB] Vocabulary data fetched: Object
unifiedVocabularyService.ts:251 Timer 'â±ï¸ [VOCAB] getVocabularyData' does not exist
getVocabularyData @ unifiedVocabularyService.ts:251
unifiedStudentDashboardService.ts:143 Timer 'â±ï¸ parallel queries' does not exist
getDashboardMetrics @ unifiedStudentDashboardService.ts:143
unifiedStudentDashboardService.ts:145 Timer 'â±ï¸ getDashboardMetrics' does not exist
getDashboardMetrics @ unifiedStudentDashboardService.ts:145
ModernStudentDashboard.tsx:452 ğŸ“Š [DASHBOARD] Gems data loaded: Object
ModernStudentDashboard.tsx:567 ğŸ“Š [DASHBOARD] Student stats loaded: Object
ModernStudentDashboard.tsx:567 ğŸ“Š [DASHBOARD] Student stats loaded: Object
script.debug.js:1 [Vercel Web Analytics] [pageview] http://localhost:3000/student-dashboard/assignments/8b3e35fd-11ba-4da9-bc87-333b01d37dd2 Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for noughts-and-crosses: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for vocab-blast: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for word-scramble: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for word-towers: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for memory-game: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for sentence-towers: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for speed-builder: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for case-file-translator: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for lava-temple-word-restore: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for hangman: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for noughts-and-crosses: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for detective-listening: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for vocab-blast: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for hangman: Object
page.tsx:325 ğŸ” [AQA RESULTS] Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for word-scramble: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for word-towers: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for memory-game: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for sentence-towers: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for speed-builder: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for case-file-translator: Object
AssignmentExposureService.ts:183 ğŸ“Š [EXPOSURE SERVICE] Getting progress [0lcvyq]: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for lava-temple-word-restore: Object
AssignmentProgressTrackingService.ts:165 ğŸ“Š [PROGRESS] Game progress for detective-listening: Object
page.tsx:325 ğŸ” [AQA RESULTS] Object
AssignmentExposureService.ts:212 ğŸ“Š [EXPOSURE SERVICE] Using actual vocabulary count: 10 [0lcvyq]
AssignmentExposureService.ts:183 ğŸ“Š [EXPOSURE SERVICE] Getting progress [lvxncl]: Object
AssignmentExposureService.ts:254 ğŸ“Š [EXPOSURE SERVICE] Progress calculated [0lcvyq]: Object
page.tsx:585 ğŸ“Š [ASSIGNMENT PROGRESS] Exposure-based calculation: Object
AssignmentExposureService.ts:212 ğŸ“Š [EXPOSURE SERVICE] Using actual vocabulary count: 10 [lvxncl]
AssignmentExposureService.ts:254 ğŸ“Š [EXPOSURE SERVICE] Progress calculated [lvxncl]: Object
page.tsx:585 ğŸ“Š [ASSIGNMENT PROGRESS] Exposure-based calculation: Object
hot-reloader-client.js:187 [Fast Refresh] rebuilding
hot-reloader-client.js:44 [Fast Refresh] done in 434ms
page.tsx:666 ğŸ® Launching game with outstanding words filter: {gameId: 'noughts-and-crosses', assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', filterOutstanding: true}
hot-reloader-client.js:187 [Fast Refresh] rebuilding
hot-reloader-client.js:44 [Fast Refresh] done in 2121ms
useAssignmentVocabulary.ts:65 ğŸ”§ [HOOK] useAssignmentVocabulary called [DEBUG-v2]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', gameId: 'noughts-and-crosses', vocabularyLength: 0, lastLoadTime: null, timestamp: '2026-01-10T20:40:40.620Z'}
page.tsx:74 ğŸ® [NOUGHTS] Game service initialized
useAssignmentVocabulary.ts:65 ğŸ”§ [HOOK] useAssignmentVocabulary called [DEBUG-v2]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', gameId: 'noughts-and-crosses', vocabularyLength: 0, lastLoadTime: null, timestamp: '2026-01-10T20:40:40.626Z'}
page.tsx:74 ğŸ® [NOUGHTS] Game service initialized
script.debug.js:1 [Vercel Web Analytics] [pageview] http://localhost:3000/activities/noughts-and-crosses?assignment=8b3e35fd-11ba-4da9-bc87-333b01d37dd2&mode=assignment&filterOutstanding=true {o: 'http://localhost:3000/activities/noughts-and-crossâ€¦3b01d37dd2&mode=assignment&filterOutstanding=true', sv: '0.1.3', sdkn: '@vercel/analytics/next', sdkv: '1.5.0', ts: 1768077640626,Â â€¦}
useAssignmentVocabulary.ts:100 ğŸ“š [HOOK] Loading vocabulary for assignment: 8b3e35fd-11ba-4da9-bc87-333b01d37dd2
useAssignmentVocabulary.ts:100 ğŸ“š [HOOK] Loading vocabulary for assignment: 8b3e35fd-11ba-4da9-bc87-333b01d37dd2
useAssignmentVocabulary.ts:240 ğŸ” [HOOK] Filtering to unexposed words only (exposure-based)...
useAssignmentVocabulary.ts:240 ğŸ” [HOOK] Filtering to unexposed words only (exposure-based)...
useAssignmentVocabulary.ts:259 ğŸ“Š [HOOK] Exposure-based filter results: {total: 10, exposed: 0, unexposed: 10, progress: '0.0%'}
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: true, error: null,Â â€¦}
page.tsx:124 ğŸ® [NOUGHTS] Creating assignment game session...
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: true, error: null,Â â€¦}
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: true, error: null,Â â€¦}
useAssignmentVocabulary.ts:259 ğŸ“Š [HOOK] Exposure-based filter results: {total: 10, exposed: 0, unexposed: 10, progress: '0.0%'}
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: true, error: null,Â â€¦}
page.tsx:124 ğŸ® [NOUGHTS] Creating assignment game session...
useVocabulary.ts:127 ğŸ” [useVocabularyByCategory] Query debug: {language: 'es', categoryId: 'custom', subcategoryId: 'user_list', curriculumLevel: 'KS3', examBoard: undefined,Â â€¦}
useVocabulary.ts:152 ğŸ”„ [useVocabularyByCategory] No results found, trying category only fallback
useVocabulary.ts:127 ğŸ” [useVocabularyByCategory] Query debug: {language: 'es', categoryId: 'custom', subcategoryId: 'user_list', curriculumLevel: 'KS3', examBoard: undefined,Â â€¦}
useVocabulary.ts:152 ğŸ”„ [useVocabularyByCategory] No results found, trying category only fallback
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: false, error: null,Â â€¦}
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: false, error: null,Â â€¦}
page.tsx:136 âœ… [NOUGHTS] Assignment game session created: 13635b30-66ca-458d-8327-8028472977f1
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: false, error: null,Â â€¦}assignmentVocabulary: 10error: nullhookVocabulary: 0isLoading: falsemappedLanguage: "es"settings: {language: 'spanish', category: 'custom', subcategory: 'user_list', curriculumLevel: undefined, examBoard: undefined,Â â€¦}[[Prototype]]: Object
page.tsx:136 âœ… [NOUGHTS] Assignment game session created: 46b2ae0a-f266-452e-bd7f-21acb8619f17
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: false, error: null,Â â€¦}
TicTacToeGameThemed.tsx:231 ğŸ¯ [SESSION DEDUP] Word marked as used: {word: 'Ciclismo', id: 'bd0f9d30-42e7-46df-82a3-6222bc397638', totalUsedThisSession: 1}
TicTacToeGameThemed.tsx:357 ğŸ® [NOUGHTS] Attempting to record gem: {vocabularyId: 'bd0f9d30-42e7-46df-82a3-6222bc397638', gameSessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', word: 'Ciclismo', isCorrect: true, isCustomVocabulary: undefined}
EnhancedGameSessionService.ts:330 ğŸ”® [SESSION SERVICE] recordWordAttempt called [1txexftvn]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', gameType: 'noughts-and-crosses', attempt: {â€¦}, skipSpacedRepetition: false}
EnhancedGameSessionService.ts:133 ğŸ“Š [SESSION COUNTS] Incrementing for session 46b2ae0a-f266-452e-bd7f-21acb8619f17, wasCorrect: true
EnhancedGameSessionService.ts:155 ğŸ“Š [SESSION COUNTS] Updating: 0 â†’ 1 attempted, 0 â†’ 1 correct
EnhancedGameSessionService.ts:169 âœ… [SESSION COUNTS] Successfully updated session 46b2ae0a-f266-452e-bd7f-21acb8619f17
EnhancedGameSessionService.ts:347 ğŸ”® [SESSION SERVICE] Logging word performance [1txexftvn]...
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/word_performance_logs 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:939 âš ï¸ [PERFORMANCE LOG] FK violation detected. Retrying as Custom Vocabulary...
logWordPerformance @ EnhancedGameSessionService.ts:939
await in logWordPerformance
recordWordAttempt @ EnhancedGameSessionService.ts:348
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:360 ğŸ” [ENHANCED SESSION] FSRS update: {vocabularyId: 'bd0f9d30-42e7-46df-82a3-6222bc397638', enhancedVocabularyItemId: undefined, wasCorrect: true, callId: '1txexftvn'}
EnhancedGameSessionService.ts:951 âœ… [PERFORMANCE LOG] Successfully logged custom vocabulary performance after retry.
EnhancedGameSessionService.ts:1060 âœ… [FSRS GATE] Word is due for review, allowing progression: {vocabularyId: 'bd0f9d30-42e7-46df-82a3-6222bc397638', phase: 'new', state: 'new'}
EnhancedGameSessionService.ts:1117 âœ… [DIRECT UPDATE] Vocabulary updated successfully: {vocabularyId: 'bd0f9d30-42e7-46df-82a3-6222bc397638', wasCorrect: true, studentId: '9d184226-be17-4612-8685-0ac45fcef060', phase: 'new'}
EnhancedGameSessionService.ts:375 âœ… [ENHANCED SESSION] FSRS update completed successfully
EnhancedGameSessionService.ts:416 ğŸ”® [SESSION SERVICE] Getting session context for session [1txexftvn]...
EnhancedGameSessionService.ts:418 ğŸ”® [SESSION SERVICE] Student ID: 9d184226-be17-4612-8685-0ac45fcef060, Assignment ID: 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 [1txexftvn]
EnhancedGameSessionService.ts:426 ğŸ“ [LAYER 2] Recording exposure for word bd0f9d30-42e7-46df-82a3-6222bc397638 in assignment 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 (isCustom: false)
AssignmentExposureService.ts:64 ğŸ“ [EXPOSURE SERVICE] Recording exposures [nptkx3]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', studentId: '9d184226-be17-4612-8685-0ac45fcef060', wordCount: 1, wordIds: Array(1), isCustomVocabulary: false}
EnhancedGameSessionService.ts:435 ğŸ® [DUAL-TRACK] Awarding Activity Gem for correct answer [1txexftvn]
EnhancedGameSessionService.ts:456 ğŸ”® [SESSION SERVICE] Activity gem created [1txexftvn]: {rarity: 'rare', xpValue: 5, wordText: 'Ciclismo'}
EnhancedGameSessionService.ts:463 ğŸ”® [SESSION SERVICE] Storing Activity Gem in database [1txexftvn]...
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [s6ccgdhnn]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'activity', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [s6ccgdhnn]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'rare', xp_value: 5, word_text: 'Ciclismo',Â â€¦}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:464
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/assignment_word_exposure?on_conflict=assignment_id%2Cstudent_id%2Ccentralized_vocabulary_id&columns=%22assignment_id%22%2C%22student_id%22%2C%22centralized_vocabulary_id%22%2C%22last_exposed_at%22&select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
AssignmentExposureService.ts:120 âš ï¸ [EXPOSURE SERVICE] FK violation on centralized_vocabulary_id [nptkx3]. Retrying as custom vocabulary...
recordWordExposures @ AssignmentExposureService.ts:120
await in recordWordExposures
recordWordAttempt @ EnhancedGameSessionService.ts:427
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:121 âš ï¸ [EXPOSURE SERVICE] Note: This is expected for custom vocabulary items.
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: bd0f9d30-42e7-46df-82a3-6222bc397638
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [s6ccgdhnn]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored activity gem [s6ccgdhnn]: rare (5 XP) for "Ciclismo"
EnhancedGameSessionService.ts:492 ğŸ’ [DUAL-TRACK] FSRS allows progression - awarding Mastery Gem
EnhancedGameSessionService.ts:493 ğŸ” [DEBUG] canProgress data: {allowed: true, reason: 'New word - first encounter', phase: 'new', state: 'new', nextReviewAt: '2026-01-12T20:40:55.310883+00:00'}
EnhancedGameSessionService.ts:495 ğŸ” [DEBUG] isFirstTime calculation: {phase: 'new', isFirstTime: true}
RewardEngine.ts:215 ğŸ†• [REWARD ENGINE] First-time word detected - awarding New Discovery
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [bhovth73j]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'mastery', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [bhovth73j]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'new_discovery', xp_value: 5, word_text: 'Ciclismo',Â â€¦}
AssignmentExposureService.ts:144 âœ… [EXPOSURE SERVICE] Recorded 1 custom exposures [nptkx3]
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:519
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: bd0f9d30-42e7-46df-82a3-6222bc397638
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [bhovth73j]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored mastery gem [bhovth73j]: new_discovery (5 XP) for "Ciclismo"
EnhancedGameSessionService.ts:531 ğŸ”® [SESSION SERVICE] Gem event cached for session summary [1txexftvn]: {rarity: 'new_discovery', xpValue: 5}
EnhancedGameSessionService.ts:537 ğŸ”® [SESSION SERVICE] recordWordAttempt completed [1txexftvn]: {returnedGemEvent: true, gemRarity: 'new_discovery', gemXP: 5}
TicTacToeGameThemed.tsx:385 âœ… [NOUGHTS] Gem awarded successfully: {rarity: 'new_discovery', xpValue: 5, vocabularyId: 'bd0f9d30-42e7-46df-82a3-6222bc397638', wordText: 'Ciclismo', translationText: 'Cycling',Â â€¦}
TicTacToeGameThemed.tsx:231 ğŸ¯ [SESSION DEDUP] Word marked as used: {word: 'NataciÃ³n', id: '95740e7c-272e-4385-b6b3-2ae0a001cafe', totalUsedThisSession: 2}
TicTacToeGameThemed.tsx:357 ğŸ® [NOUGHTS] Attempting to record gem: {vocabularyId: '95740e7c-272e-4385-b6b3-2ae0a001cafe', gameSessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', word: 'NataciÃ³n', isCorrect: true, isCustomVocabulary: undefined}
EnhancedGameSessionService.ts:330 ğŸ”® [SESSION SERVICE] recordWordAttempt called [d8mhfyqak]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', gameType: 'noughts-and-crosses', attempt: {â€¦}, skipSpacedRepetition: false}
EnhancedGameSessionService.ts:133 ğŸ“Š [SESSION COUNTS] Incrementing for session 46b2ae0a-f266-452e-bd7f-21acb8619f17, wasCorrect: true
EnhancedGameSessionService.ts:155 ğŸ“Š [SESSION COUNTS] Updating: 1 â†’ 2 attempted, 1 â†’ 2 correct
EnhancedGameSessionService.ts:169 âœ… [SESSION COUNTS] Successfully updated session 46b2ae0a-f266-452e-bd7f-21acb8619f17
EnhancedGameSessionService.ts:347 ğŸ”® [SESSION SERVICE] Logging word performance [d8mhfyqak]...
EnhancedGameSessionService.ts:360 ğŸ” [ENHANCED SESSION] FSRS update: {vocabularyId: '95740e7c-272e-4385-b6b3-2ae0a001cafe', enhancedVocabularyItemId: undefined, wasCorrect: true, callId: 'd8mhfyqak'}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/word_performance_logs 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:939 âš ï¸ [PERFORMANCE LOG] FK violation detected. Retrying as Custom Vocabulary...
logWordPerformance @ EnhancedGameSessionService.ts:939
await in logWordPerformance
recordWordAttempt @ EnhancedGameSessionService.ts:348
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:1060 âœ… [FSRS GATE] Word is due for review, allowing progression: {vocabularyId: '95740e7c-272e-4385-b6b3-2ae0a001cafe', phase: 'new', state: 'new'}
EnhancedGameSessionService.ts:951 âœ… [PERFORMANCE LOG] Successfully logged custom vocabulary performance after retry.
EnhancedGameSessionService.ts:1117 âœ… [DIRECT UPDATE] Vocabulary updated successfully: {vocabularyId: '95740e7c-272e-4385-b6b3-2ae0a001cafe', wasCorrect: true, studentId: '9d184226-be17-4612-8685-0ac45fcef060', phase: 'new'}
EnhancedGameSessionService.ts:375 âœ… [ENHANCED SESSION] FSRS update completed successfully
EnhancedGameSessionService.ts:416 ğŸ”® [SESSION SERVICE] Getting session context for session [d8mhfyqak]...
EnhancedGameSessionService.ts:418 ğŸ”® [SESSION SERVICE] Student ID: 9d184226-be17-4612-8685-0ac45fcef060, Assignment ID: 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 [d8mhfyqak]
EnhancedGameSessionService.ts:426 ğŸ“ [LAYER 2] Recording exposure for word 95740e7c-272e-4385-b6b3-2ae0a001cafe in assignment 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 (isCustom: false)
AssignmentExposureService.ts:64 ğŸ“ [EXPOSURE SERVICE] Recording exposures [s914qod]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', studentId: '9d184226-be17-4612-8685-0ac45fcef060', wordCount: 1, wordIds: Array(1), isCustomVocabulary: false}
EnhancedGameSessionService.ts:435 ğŸ® [DUAL-TRACK] Awarding Activity Gem for correct answer [d8mhfyqak]
EnhancedGameSessionService.ts:456 ğŸ”® [SESSION SERVICE] Activity gem created [d8mhfyqak]: {rarity: 'rare', xpValue: 5, wordText: 'NataciÃ³n'}
EnhancedGameSessionService.ts:463 ğŸ”® [SESSION SERVICE] Storing Activity Gem in database [d8mhfyqak]...
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [ijeijc1nq]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'activity', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [ijeijc1nq]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'rare', xp_value: 5, word_text: 'NataciÃ³n',Â â€¦}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/assignment_word_exposure?on_conflict=assignment_id%2Cstudent_id%2Ccentralized_vocabulary_id&columns=%22assignment_id%22%2C%22student_id%22%2C%22centralized_vocabulary_id%22%2C%22last_exposed_at%22&select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
AssignmentExposureService.ts:120 âš ï¸ [EXPOSURE SERVICE] FK violation on centralized_vocabulary_id [s914qod]. Retrying as custom vocabulary...
recordWordExposures @ AssignmentExposureService.ts:120
await in recordWordExposures
recordWordAttempt @ EnhancedGameSessionService.ts:427
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:121 âš ï¸ [EXPOSURE SERVICE] Note: This is expected for custom vocabulary items.
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:464
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:144 âœ… [EXPOSURE SERVICE] Recorded 1 custom exposures [s914qod]
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: 95740e7c-272e-4385-b6b3-2ae0a001cafe
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [ijeijc1nq]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored activity gem [ijeijc1nq]: rare (5 XP) for "NataciÃ³n"
EnhancedGameSessionService.ts:492 ğŸ’ [DUAL-TRACK] FSRS allows progression - awarding Mastery Gem
EnhancedGameSessionService.ts:493 ğŸ” [DEBUG] canProgress data: {allowed: true, reason: 'New word - first encounter', phase: 'new', state: 'new', nextReviewAt: '2026-01-12T20:40:58.216014+00:00'}
EnhancedGameSessionService.ts:495 ğŸ” [DEBUG] isFirstTime calculation: {phase: 'new', isFirstTime: true}
RewardEngine.ts:215 ğŸ†• [REWARD ENGINE] First-time word detected - awarding New Discovery
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [ebsgq2duf]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'mastery', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [ebsgq2duf]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'new_discovery', xp_value: 5, word_text: 'NataciÃ³n',Â â€¦}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:519
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: 95740e7c-272e-4385-b6b3-2ae0a001cafe
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [ebsgq2duf]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored mastery gem [ebsgq2duf]: new_discovery (5 XP) for "NataciÃ³n"
EnhancedGameSessionService.ts:531 ğŸ”® [SESSION SERVICE] Gem event cached for session summary [d8mhfyqak]: {rarity: 'new_discovery', xpValue: 5}
EnhancedGameSessionService.ts:537 ğŸ”® [SESSION SERVICE] recordWordAttempt completed [d8mhfyqak]: {returnedGemEvent: true, gemRarity: 'new_discovery', gemXP: 5}
TicTacToeGameThemed.tsx:385 âœ… [NOUGHTS] Gem awarded successfully: {rarity: 'new_discovery', xpValue: 5, vocabularyId: '95740e7c-272e-4385-b6b3-2ae0a001cafe', wordText: 'NataciÃ³n', translationText: 'Swimming',Â â€¦}
TicTacToeGameThemed.tsx:231 ğŸ¯ [SESSION DEDUP] Word marked as used: {word: 'FÃºtbol', id: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', totalUsedThisSession: 3}
TicTacToeGameThemed.tsx:357 ğŸ® [NOUGHTS] Attempting to record gem: {vocabularyId: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', gameSessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', word: 'FÃºtbol', isCorrect: true, isCustomVocabulary: undefined}
EnhancedGameSessionService.ts:330 ğŸ”® [SESSION SERVICE] recordWordAttempt called [1y3rg0668]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', gameType: 'noughts-and-crosses', attempt: {â€¦}, skipSpacedRepetition: false}
EnhancedGameSessionService.ts:133 ğŸ“Š [SESSION COUNTS] Incrementing for session 46b2ae0a-f266-452e-bd7f-21acb8619f17, wasCorrect: true
TicTacToeGameThemed.tsx:782 ğŸ“ [LAYER 2] Recording word exposures: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', studentId: '9d184226-be17-4612-8685-0ac45fcef060', wordCount: 3}
AssignmentExposureService.ts:64 ğŸ“ [EXPOSURE SERVICE] Recording exposures [se3n1b]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', studentId: '9d184226-be17-4612-8685-0ac45fcef060', wordCount: 3, wordIds: Array(3), isCustomVocabulary: false}
EnhancedGameSessionService.ts:155 ğŸ“Š [SESSION COUNTS] Updating: 2 â†’ 3 attempted, 2 â†’ 3 correct
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/assignment_word_exposure?on_conflict=assignment_id%2Cstudent_id%2Ccentralized_vocabulary_id&columns=%22assignment_id%22%2C%22student_id%22%2C%22centralized_vocabulary_id%22%2C%22last_exposed_at%22&select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
AssignmentExposureService.ts:120 âš ï¸ [EXPOSURE SERVICE] FK violation on centralized_vocabulary_id [se3n1b]. Retrying as custom vocabulary...
recordWordExposures @ AssignmentExposureService.ts:120
await in recordWordExposures
handleGameEnd @ TicTacToeGameThemed.tsx:790
makeMove @ TicTacToeGameThemed.tsx:532
processAnswer @ TicTacToeGameThemed.tsx:469
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:121 âš ï¸ [EXPOSURE SERVICE] Note: This is expected for custom vocabulary items.
EnhancedGameSessionService.ts:169 âœ… [SESSION COUNTS] Successfully updated session 46b2ae0a-f266-452e-bd7f-21acb8619f17
EnhancedGameSessionService.ts:347 ğŸ”® [SESSION SERVICE] Logging word performance [1y3rg0668]...
AssignmentExposureService.ts:144 âœ… [EXPOSURE SERVICE] Recorded 3 custom exposures [se3n1b]
TicTacToeGameThemed.tsx:796 âœ… [LAYER 2] Exposures recorded successfully
EnhancedGameSessionService.ts:360 ğŸ” [ENHANCED SESSION] FSRS update: {vocabularyId: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', enhancedVocabularyItemId: undefined, wasCorrect: true, callId: '1y3rg0668'}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/word_performance_logs 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:939 âš ï¸ [PERFORMANCE LOG] FK violation detected. Retrying as Custom Vocabulary...
logWordPerformance @ EnhancedGameSessionService.ts:939
await in logWordPerformance
recordWordAttempt @ EnhancedGameSessionService.ts:348
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:1060 âœ… [FSRS GATE] Word is due for review, allowing progression: {vocabularyId: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', phase: 'new', state: 'new'}
EnhancedGameSessionService.ts:951 âœ… [PERFORMANCE LOG] Successfully logged custom vocabulary performance after retry.
EnhancedGameSessionService.ts:1117 âœ… [DIRECT UPDATE] Vocabulary updated successfully: {vocabularyId: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', wasCorrect: true, studentId: '9d184226-be17-4612-8685-0ac45fcef060', phase: 'new'}
EnhancedGameSessionService.ts:375 âœ… [ENHANCED SESSION] FSRS update completed successfully
EnhancedGameSessionService.ts:416 ğŸ”® [SESSION SERVICE] Getting session context for session [1y3rg0668]...
EnhancedGameSessionService.ts:418 ğŸ”® [SESSION SERVICE] Student ID: 9d184226-be17-4612-8685-0ac45fcef060, Assignment ID: 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 [1y3rg0668]
EnhancedGameSessionService.ts:426 ğŸ“ [LAYER 2] Recording exposure for word 2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9 in assignment 8b3e35fd-11ba-4da9-bc87-333b01d37dd2 (isCustom: false)
AssignmentExposureService.ts:64 ğŸ“ [EXPOSURE SERVICE] Recording exposures [wca1qo]: {assignmentId: '8b3e35fd-11ba-4da9-bc87-333b01d37dd2', studentId: '9d184226-be17-4612-8685-0ac45fcef060', wordCount: 1, wordIds: Array(1), isCustomVocabulary: false}
EnhancedGameSessionService.ts:435 ğŸ® [DUAL-TRACK] Awarding Activity Gem for correct answer [1y3rg0668]
EnhancedGameSessionService.ts:456 ğŸ”® [SESSION SERVICE] Activity gem created [1y3rg0668]: {rarity: 'uncommon', xpValue: 3, wordText: 'FÃºtbol'}
EnhancedGameSessionService.ts:463 ğŸ”® [SESSION SERVICE] Storing Activity Gem in database [1y3rg0668]...
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [d18e0xkei]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'activity', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [d18e0xkei]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'uncommon', xp_value: 3, word_text: 'FÃºtbol',Â â€¦}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/assignment_word_exposure?on_conflict=assignment_id%2Cstudent_id%2Ccentralized_vocabulary_id&columns=%22assignment_id%22%2C%22student_id%22%2C%22centralized_vocabulary_id%22%2C%22last_exposed_at%22&select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:464
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:120 âš ï¸ [EXPOSURE SERVICE] FK violation on centralized_vocabulary_id [wca1qo]. Retrying as custom vocabulary...
recordWordExposures @ AssignmentExposureService.ts:120
await in recordWordExposures
recordWordAttempt @ EnhancedGameSessionService.ts:427
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
AssignmentExposureService.ts:121 âš ï¸ [EXPOSURE SERVICE] Note: This is expected for custom vocabulary items.
AssignmentExposureService.ts:144 âœ… [EXPOSURE SERVICE] Recorded 1 custom exposures [wca1qo]
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: 2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [d18e0xkei]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored activity gem [d18e0xkei]: uncommon (3 XP) for "FÃºtbol"
EnhancedGameSessionService.ts:492 ğŸ’ [DUAL-TRACK] FSRS allows progression - awarding Mastery Gem
EnhancedGameSessionService.ts:493 ğŸ” [DEBUG] canProgress data: {allowed: true, reason: 'New word - first encounter', phase: 'new', state: 'new', nextReviewAt: '2026-01-12T20:41:03.184785+00:00'}
EnhancedGameSessionService.ts:495 ğŸ” [DEBUG] isFirstTime calculation: {phase: 'new', isFirstTime: true}
RewardEngine.ts:215 ğŸ†• [REWARD ENGINE] First-time word detected - awarding New Discovery
EnhancedGameSessionService.ts:561 ğŸ’ [STORE GEM] Starting to store gem event [cyecu46ga]: {sessionId: '46b2ae0a-f266-452e-bd7f-21acb8619f17', studentId: '9d184226-be17-4612-8685-0ac45fcef060', gemType: 'mastery', gemEvent: {â€¦}}
EnhancedGameSessionService.ts:627 ğŸ’ [STORE GEM] Inserting into gem_events table [cyecu46ga]: {session_id: '46b2ae0a-f266-452e-bd7f-21acb8619f17', student_id: '9d184226-be17-4612-8685-0ac45fcef060', gem_rarity: 'new_discovery', xp_value: 5, word_text: 'FÃºtbol',Â â€¦}
fetch.js:30  POST https://xetsvpfunazwkontdpdh.supabase.co/rest/v1/gem_events?select=* 409 (Conflict)
eval @ fetch.js:30
eval @ fetch.js:51
fulfilled @ fetch.js:11
Promise.then
step @ fetch.js:13
eval @ fetch.js:14
__awaiter @ fetch.js:10
eval @ fetch.js:41
then @ PostgrestBuilder.js:66
EnhancedGameSessionService.ts:637 âš ï¸ [STORE GEM] FK violation detected. Code: 23503. Retrying as Custom Vocabulary...
storeGemEvent @ EnhancedGameSessionService.ts:637
await in storeGemEvent
recordWordAttempt @ EnhancedGameSessionService.ts:519
await in recordWordAttempt
processAnswer @ TicTacToeGameThemed.tsx:369
handleVocabAnswer @ TicTacToeGameThemed.tsx:323
onClick @ TicTacToeGameThemed.tsx:1885
callCallback @ react-dom.development.js:20565
invokeGuardedCallbackImpl @ react-dom.development.js:20614
invokeGuardedCallback @ react-dom.development.js:20689
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:20703
executeDispatch @ react-dom.development.js:32128
processDispatchQueueItemsInOrder @ react-dom.development.js:32160
processDispatchQueue @ react-dom.development.js:32173
dispatchEventsForPlugins @ react-dom.development.js:32184
eval @ react-dom.development.js:32374
batchedUpdates$1 @ react-dom.development.js:24953
batchedUpdates @ react-dom.development.js:28844
dispatchEventForPluginEventSystem @ react-dom.development.js:32373
dispatchEvent @ react-dom.development.js:30141
dispatchDiscreteEvent @ react-dom.development.js:30112
EnhancedGameSessionService.ts:652 âœ… [STORE GEM] Successfully stored custom vocabulary gem after retry. ID: 2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9
EnhancedGameSessionService.ts:658 ğŸ’ [STORE GEM] Database insert result [cyecu46ga]: {success: true, error: undefined, errorCode: undefined, insertedData: Array(1)}
EnhancedGameSessionService.ts:669 ğŸ’ [STORE GEM] Successfully stored mastery gem [cyecu46ga]: new_discovery (5 XP) for "FÃºtbol"
EnhancedGameSessionService.ts:531 ğŸ”® [SESSION SERVICE] Gem event cached for session summary [1y3rg0668]: {rarity: 'new_discovery', xpValue: 5}
EnhancedGameSessionService.ts:537 ğŸ”® [SESSION SERVICE] recordWordAttempt completed [1y3rg0668]: {returnedGemEvent: true, gemRarity: 'new_discovery', gemXP: 5}
TicTacToeGameThemed.tsx:385 âœ… [NOUGHTS] Gem awarded successfully: {rarity: 'new_discovery', xpValue: 5, vocabularyId: '2acee4c2-1868-4fe5-b6e7-0a5f7563b9e9', wordText: 'FÃºtbol', translationText: 'Football / Soccer',Â â€¦}
page.tsx:234 Assignment game ended (round): {outcome: 'win', wordsLearned: 2, perfectGame: false, correctAnswers: 2, totalQuestions: 3,Â â€¦}
page.tsx:256 ğŸ“Š [NOUGHTS] Session progress: 3/9 unique words this session
TicTacToeGameWrapper.tsx:106 ğŸ” [TicTacToe] Vocabulary loading debug: {settings: {â€¦}, mappedLanguage: 'es', hookVocabulary: 0, isLoading: false, error: null,Â â€¦}
